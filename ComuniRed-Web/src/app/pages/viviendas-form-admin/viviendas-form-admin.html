<div class="container py-4">
    <!-- Encabezado -->
    <div class="mb-4">
        @if (modoEdicion) {
            <h4 class="fw-bold">Editar Vivienda</h4>
            <p class="text-muted mb-0">Actualizar información de la vivienda</p>
        } @else {
            <h4 class="fw-bold">Nueva Vivienda</h4>
            <p class="text-muted mb-0">Agregar una nueva vivienda a la comunidad</p>
        }
    </div>

    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-body">
                    <form [formGroup]="viviendaForm" (ngSubmit)="guardarVivienda()">
                        <div class="row">
                            <!-- Número de Vivienda -->
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Número de Vivienda *</label>
                                <input 
                                    type="text" 
                                    class="form-control" 
                                    formControlName="numero_vivienda"
                                    placeholder="Ej: 101, A-1, etc.">
                                @if (viviendaForm.get('numero_vivienda')?.invalid && viviendaForm.get('numero_vivienda')?.touched) {
                                    <small class="text-danger">Campo requerido (máx. 10 caracteres)</small>
                                }
                            </div>

                            <!-- Tipo -->
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Tipo *</label>
                                <select class="form-select" formControlName="tipo">
                                    <option value="piso">Piso</option>
                                    <option value="local">Local</option>
                                    <option value="garaje">Garaje</option>
                                </select>
                            </div>

                            <!-- Bloque -->
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Bloque</label>
                                <input 
                                    type="text" 
                                    class="form-control" 
                                    formControlName="bloque"
                                    placeholder="Ej: A, B, 1...">
                            </div>

                            <!-- Piso -->
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Piso</label>
                                <input 
                                    type="text" 
                                    class="form-control" 
                                    formControlName="piso"
                                    placeholder="Ej: 1, 2, Bajo...">
                            </div>

                            <!-- Puerta -->
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Puerta</label>
                                <input 
                                    type="text" 
                                    class="form-control" 
                                    formControlName="puerta"
                                    placeholder="Ej: A, B, 1...">
                            </div>

                            <!-- Metros Cuadrados -->
                            <div class="col-md-12 mb-3">
                                <label class="form-label">Metros Cuadrados</label>
                                <input 
                                    type="number" 
                                    class="form-control" 
                                    formControlName="metros_cuadrados"
                                    placeholder="Ej: 85.5"
                                    step="0.01">
                            </div>
                        </div>

                        <!-- Botones -->
                        <div class="d-flex justify-content-end gap-2 mt-4">
                            <button 
                                type="button" 
                                class="btn btn-outline-secondary" 
                                (click)="cancelar()"
                                [disabled]="cargando">
                                Cancelar
                            </button>
                            <button 
                                type="submit" 
                                class="btn btn-dark"
                                [disabled]="viviendaForm.invalid || cargando">
                                @if (cargando) {
                                    <span class="spinner-border spinner-border-sm me-2"></span>
                                }
                                @if (modoEdicion) {
                                    <i class="bi bi-save me-2"></i>Actualizar
                                } @else {
                                    <i class="bi bi-plus-circle me-2"></i>Crear
                                }
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
