<div class="container py-4">
  <div class="card">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">{{ isEditMode ? 'Editar' : 'Nueva' }} Comunicación</h2>
        <button type="button" class="btn btn-outline-secondary rounded-pill" (click)="cancelar()">
          <i class="bi bi-arrow-left me-2"></i>Volver
        </button>
      </div>

      <form [formGroup]="comunicacionForm" (ngSubmit)="guardarComunicacion()">
        <!-- Título -->
        <div class="mb-3">
          <label for="titulo" class="form-label">Título *</label>
          <input
            type="text"
            id="titulo"
            class="form-control"
            formControlName="titulo"
            placeholder="Ej: Reunión de vecinos"
          />
          @if (comunicacionForm.get('titulo')?.invalid && comunicacionForm.get('titulo')?.touched) {
            <div class="text-danger small mt-1">
              @if (comunicacionForm.get('titulo')?.errors?.['required']) {
                El título es obligatorio
              }
              @if (comunicacionForm.get('titulo')?.errors?.['maxlength']) {
                Máximo 200 caracteres
              }
            </div>
          }
        </div>

        <!-- Contenido -->
        <div class="mb-3">
          <label for="contenido" class="form-label">Contenido *</label>
          <textarea
            id="contenido"
            class="form-control"
            formControlName="contenido"
            rows="5"
            placeholder="Escribe aquí el contenido de la comunicación..."
          ></textarea>
          @if (comunicacionForm.get('contenido')?.invalid && comunicacionForm.get('contenido')?.touched) {
            <div class="text-danger small mt-1">
              El contenido es obligatorio
            </div>
          }
        </div>

        <!-- Tipo -->
        <div class="mb-3">
          <label for="tipo" class="form-label">Tipo *</label>
          <select id="tipo" class="form-select" formControlName="tipo">
            <option value="">Selecciona un tipo</option>
            @for (tipo of tipos; track tipo) {
              <option [value]="tipo">{{ tipo }}</option>
            }
          </select>
          @if (comunicacionForm.get('tipo')?.invalid && comunicacionForm.get('tipo')?.touched) {
            <div class="text-danger small mt-1">
              El tipo es obligatorio
            </div>
          }
        </div>

        <!-- Fecha de Publicación -->
        <div class="mb-3">
          <label for="fecha_publicacion" class="form-label">Fecha de Publicación *</label>
          <input
            type="date"
            id="fecha_publicacion"
            class="form-control"
            formControlName="fecha_publicacion"
          />
          @if (comunicacionForm.get('fecha_publicacion')?.invalid && comunicacionForm.get('fecha_publicacion')?.touched) {
            <div class="text-danger small mt-1">
              La fecha de publicación es obligatoria
            </div>
          }
        </div>

        <!-- Botones -->
        <div class="d-flex gap-2">
          <button
            type="submit"
            class="btn btn-primary rounded-pill"
            [disabled]="!comunicacionForm.valid"
          >
            <i class="bi bi-check-circle me-2"></i>
            {{ isEditMode ? 'Actualizar' : 'Crear' }} Comunicación
          </button>
          <button type="button" class="btn btn-outline-secondary rounded-pill" (click)="cancelar()">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
